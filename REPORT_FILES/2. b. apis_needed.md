# APIs Needed - Bank Saving System

## üéØ API Summary

Dokumentasi lengkap semua API endpoints yang dibutuhkan untuk Bank Saving System.

---

## üìä API Overview

**Total Endpoints:** 18  
**Base URL (Production):** `https://banksavingsystem-api-production.up.railway.app/api`  
**Base URL (Development):** `http://localhost:3000/api`

---

## üóÇÔ∏è API Categories

### 1. Health & Info (2 endpoints)
- `GET /` - API information
- `GET /api/health` - Health check

### 2. Customers (5 endpoints)
- CRUD operations untuk customer management

### 3. Deposito Types (5 endpoints)
- CRUD operations untuk deposito type configuration

### 4. Accounts (4 endpoints)
- Create, read, delete account operations

### 5. Transactions (3 endpoints)
- Deposit, withdrawal, dan transaction history

---

## üìã Complete API List

### Health & General

#### 1. GET `/`
**Purpose:** Get API information  
**Auth:** None  
**Response:**
```json
{
  "success": true,
  "message": "Bank Saving System API",
  "version": "1.0.0",
  "endpoints": {
    "health": "/api/health",
    "documentation": "/api-docs",
    "customers": "/api/customers",
    "depositoTypes": "/api/deposito-types",
    "accounts": "/api/accounts",
    "transactions": "/api/transactions"
  }
}
```

#### 2. GET `/api/health`
**Purpose:** Health check endpoint  
**Auth:** None  
**Response:**
```json
{
  "success": true,
  "message": "Bank Saving System API is running",
  "timestamp": "2025-12-03T10:00:00Z"
}
```

---

### Customer APIs

#### 3. GET `/api/customers`
**Purpose:** Get all customers  
**Auth:** None  
**Query Params:** None  
**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "John Doe",
      "created_at": "2025-12-01T10:00:00Z",
      "updated_at": "2025-12-01T10:00:00Z"
    }
  ]
}
```

#### 4. GET `/api/customers/:id`
**Purpose:** Get customer by ID  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Response:** Single customer object  
**Errors:** 404 if not found

#### 5. POST `/api/customers`
**Purpose:** Create new customer  
**Auth:** None  
**Body:**
```json
{
  "name": "John Doe"  // min 3 characters
}
```
**Response:** 201 Created with customer object  
**Errors:** 400 if validation fails

#### 6. PUT `/api/customers/:id`
**Purpose:** Update customer  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Body:**
```json
{
  "name": "John Doe Updated"
}
```
**Response:** 200 OK with updated customer  
**Errors:** 404 if not found, 400 if validation fails

#### 7. DELETE `/api/customers/:id`
**Purpose:** Delete customer  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Response:** 200 OK  
**Errors:** 404 if not found, 400 if has active accounts

---

### Deposito Type APIs

#### 8. GET `/api/deposito-types`
**Purpose:** Get all deposito types  
**Auth:** None  
**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "Gold Deposito",
      "yearly_return": 0.05,
      "created_at": "2025-12-01T10:00:00Z",
      "updated_at": "2025-12-01T10:00:00Z"
    }
  ]
}
```

#### 9. GET `/api/deposito-types/:id`
**Purpose:** Get deposito type by ID  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Errors:** 404 if not found

#### 10. POST `/api/deposito-types`
**Purpose:** Create new deposito type  
**Auth:** None  
**Body:**
```json
{
  "name": "Gold Deposito",
  "yearly_return": 0.05  // 0-1 decimal (0.05 = 5%)
}
```
**Response:** 201 Created  
**Errors:** 400 if validation fails

#### 11. PUT `/api/deposito-types/:id`
**Purpose:** Update deposito type  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Body:** Same as POST (all fields optional)  
**Response:** 200 OK  
**Errors:** 404 if not found

#### 12. DELETE `/api/deposito-types/:id`
**Purpose:** Delete deposito type  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Response:** 200 OK  
**Errors:** 404 if not found, 400 if used by accounts

---

### Account APIs

#### 13. GET `/api/accounts`
**Purpose:** Get all accounts  
**Auth:** None  
**Query Params:** `customer_id` (optional, UUID) - filter by customer  
**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "customer_id": "uuid",
      "deposito_type_id": "uuid",
      "balance": 1500000.00,
      "created_at": "2025-12-01T10:00:00Z",
      "updated_at": "2025-12-01T10:00:00Z",
      "customer": { ... },
      "deposito_type": { ... }
    }
  ]
}
```

#### 14. GET `/api/accounts/:id`
**Purpose:** Get account details with relations  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Response:** Account with customer and deposito_type objects  
**Errors:** 404 if not found

#### 15. POST `/api/accounts`
**Purpose:** Create new account  
**Auth:** None  
**Body:**
```json
{
  "customer_id": "uuid",
  "deposito_type_id": "uuid",
  "initial_balance": 1000000  // optional, default 0
}
```
**Response:** 201 Created  
**Errors:** 
- 400 if customer already has account
- 404 if customer or deposito type not found

#### 16. DELETE `/api/accounts/:id`
**Purpose:** Delete account  
**Auth:** None  
**Path Params:** `id` (UUID)  
**Response:** 200 OK  
**Errors:** 404 if not found

---

### Transaction APIs

#### 17. GET `/api/transactions`
**Purpose:** Get all transactions  
**Auth:** None  
**Query Params:** `account_id` (optional, UUID) - filter by account  
**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "account_id": "uuid",
      "type": "deposit",
      "amount": 500000.00,
      "transaction_date": "2025-12-01T10:00:00Z",
      "balance_before": 1000000.00,
      "balance_after": 1500000.00,
      "interest_earned": null,
      "months_held": null,
      "created_at": "2025-12-01T10:00:00Z"
    }
  ]
}
```

#### 18. POST `/api/transactions/deposit`
**Purpose:** Process deposit transaction  
**Auth:** None  
**Body:**
```json
{
  "account_id": "uuid",
  "amount": 500000,       // must be > 0
  "transaction_date": "2025-12-01T10:00:00Z"  // ISO 8601
}
```
**Response:** 201 Created with transaction object  
**Errors:** 
- 404 if account not found
- 400 if validation fails

#### 19. POST `/api/transactions/withdrawal`
**Purpose:** Process withdrawal with interest calculation  
**Auth:** None  
**Body:**
```json
{
  "account_id": "uuid",
  "amount": 300000,
  "transaction_date": "2025-12-03T10:00:00Z"
}
```
**Response:** 201 Created with transaction including interest  
**Interest Calculation:**
```
interest = balance √ó yearly_return √ó (months_held / 12)
```
**Errors:** 
- 404 if account not found
- 400 if insufficient balance
- 400 if validation fails

---

## üîê Authentication

**Status:** Not implemented (as per requirements)  
All endpoints are publicly accessible.

---

## üìä HTTP Status Codes

| Code | Meaning | When |
|------|---------|------|
| 200 | OK | Successful GET, PUT, DELETE |
| 201 | Created | Successful POST |
| 400 | Bad Request | Validation error, business rule violation |
| 404 | Not Found | Resource not found |
| 500 | Internal Server Error | Unexpected server error |

---

## üìù Response Format

### Success Response
```json
{
  "success": true,
  "data": { ... }
}
```

### Error Response
```json
{
  "success": false,
  "error": "Error message description"
}
```

---

## üîó API Documentation

### Interactive Documentation
- **Swagger UI:** `https://banksavingsystem-api-production.up.railway.app/api-docs`
- **OpenAPI Spec:** `https://banksavingsystem-api-production.up.railway.app/api-docs.json`

### Postman Collection
Import from: `https://banksavingsystem-api-production.up.railway.app/api-docs.json`

---

## ‚úÖ API Checklist

- [x] 18 endpoints implemented
- [x] RESTful design
- [x] JSON request/response
- [x] Input validation
- [x] Error handling
- [x] Swagger documentation
- [x] CORS enabled
- [x] Production deployment
- [x] Health check endpoint

**Status:** ‚úÖ **All APIs Implemented & Documented**
